(this["webpackJsonppuhelinluettelo-step8"]=this["webpackJsonppuhelinluettelo-step8"]||[]).push([[0],{38:function(e,n,t){"use strict";t.r(n);var o=t(0),r=t(3),c=t(2),i=t(14),a=t.n(i),s=function(e){return Object(o.jsxs)("div",{children:["filter: ",Object(o.jsx)("input",{value:e.newFilter,onChange:e.handleFilterChange})]})},l=function(e){return Object(o.jsx)("button",{onClick:e.handleClick,children:e.text})},u=function(e){var n=e.persons.filter((function(n){return n.name.toLowerCase().includes(e.newFilter.toLowerCase())}));return console.log("Phone number: ",n.map((function(e){return e.number}))),Object(o.jsx)(o.Fragment,{children:n.map((function(n){return Object(o.jsxs)("div",{children:[" ",n.name," ",n.number,Object(o.jsx)(l,{handleClick:function(){return function(n){window.confirm("Vahvista "+n.name+" poistaminen.")&&(console.log("Delete: ",n.name),e.deletePerson(n))}(n)},text:"remove"})," "]},n.name)}))})},d=function(e){return Object(o.jsxs)("form",{onSubmit:e.addRecord,children:[Object(o.jsxs)("div",{children:["name: ",Object(o.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(o.jsxs)("div",{children:["number: ",Object(o.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})},m=function(e){var n=e.message,t=e.isError;return null===n?null:Object(o.jsx)("div",{style:t?{background:"lightgrey",borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10,color:"red",fontStyle:"italic",fontSize:20}:{background:"lightgrey",borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10,color:"green",fontStyle:"italic",fontSize:20},children:n})},b=t(4),h=t.n(b),j="https://puhluetbckend.herokuapp.com/api/persons",f=function(){return console.log("Get All"),h.a.get(j).then((function(e){return e.data}))},g=function(e){return console.log("Create new db record ",e),h.a.post(j,e).then((function(e){return e.data}))},p=function(e,n){return console.log("Update db record:"+e,n),h.a.put("".concat(j,"/").concat(e),n).then((function(e){return e.data}))},O=function(e){return console.log("Delete person from db",e.name),h.a.delete("".concat(j,"/").concat(e.id)).then((function(e){return e.data}))},v=function(){var e=Object(c.useState)([]),n=Object(r.a)(e,2),t=n[0],i=n[1],a=Object(c.useState)(""),l=Object(r.a)(a,2),b=l[0],h=l[1],j=Object(c.useState)(""),v=Object(r.a)(j,2),x=v[0],w=v[1],k=Object(c.useState)(""),C=Object(r.a)(k,2),S=C[0],y=C[1],E=Object(c.useState)({message:null,isError:!1}),N=Object(r.a)(E,2),P=N[0],F=N[1],H=function(){f().then((function(e){console.log("promise fulfilled"),i(e)}))};Object(c.useEffect)((function(){console.log("effect"),H()}),[]),console.log("render",t.length,"notes");var R=function(e){setTimeout((function(){F({message:null,isError:!1})}),e)},B=function(e){return e.name!==b};return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(m,{message:P.message,isError:P.isError}),Object(o.jsx)(s,{newFilter:S,handleFilterChange:function(e){y(e.target.value)}}),Object(o.jsx)("h2",{children:"Add new"}),Object(o.jsx)(d,{newName:b,handleNameChange:function(e){h(e.target.value)},newNumber:x,handleNumberChange:function(e){w(e.target.value)},addRecord:function(e){if(e.preventDefault(),console.log("button clicked",e.target),t.every(B)){g({name:b,number:x}).then((function(e){console.log("personService.post returned person is:",e),console.log("setPerson name: ",b),i(t.concat(e)),h(""),w(""),F({message:"Uusi tietue ".concat(e.name," lis\xe4tty"),isError:!1}),R(5e3)}))}else{console.log("Phone number update");var n=t.find((function(e){return e.name===b}));if(window.confirm("Henkil\xf6 "+n.name+" on jo olemassa. P\xe4ivitet\xe4\xe4nk\xf6 puhelinnumero?")){var o={name:b,number:x};p(n.id,o).then((function(){h(""),w(""),H(),F({message:"Henkil\xf6n ".concat(o.name," puhelinnumero p\xe4ivitetty"),isError:!1}),R(5e3)}))}}}}),Object(o.jsx)("h2",{children:"Numbers"}),Object(o.jsx)(u,{persons:t,newFilter:S,deletePerson:function(e){console.log("Index.js deletePerson: ",e.name),O(e).then((function(n){console.log("Person deleted",n),H(),F({message:"Henkil\xf6 ".concat(e.name," poistettu"),isError:!1}),R(5e3)})).catch((function(n){H(),F({message:"Henkil\xf6 ".concat(e.name," on jo poistettu palvelimelta."),isError:!0}),R(5e3)}))}})]})};a.a.render(Object(o.jsx)(v,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.026a2714.chunk.js.map